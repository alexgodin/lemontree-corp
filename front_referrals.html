<html>
    <head>
        <script type="text/javascript" src="//dl.frontapp.com/libs/plugin-sdk-1.0.1.min.js"></script>
        <script src="https://cdn.tryretool.com/embed.js"> </script>
    </head>
    <body>
        <span id="callerId"></span>
        <div id="retoolContainer" style="width:100%; height:100%;"></div>
    </body>
    <script>
        var rt = window.retool.RetoolDashboard(document.getElementById('retoolContainer'), 'https://lemontreeadmin.tryretool.com/embedded/public/8e4fcbcb-2b98-42fe-a879-25e6d927ed2e');
        const callerIdElement = document.getElementById('callerId');
        Front.contextUpdates.subscribe(context => {
            if(context.type == 'singleConversation'){
                callerId.innerHTML = context.conversation.recipient.contact.customAttributes.filter((x) => x.name == 'caller_id')[0].value;
            }else{
                alert("No Caller Selected");
            }
        });
    </script>
</html>